(this["webpackJsonpneighborhood-map"]=this["webpackJsonpneighborhood-map"]||[]).push([[0],{17:function(e,t,n){e.exports=n(42)},22:function(e,t,n){},23:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(14),r=n.n(i),c=(n(22),n(2)),l=n(3),s=n(5),u=n(4),f=n(6),d=(n(23),n(15)),m=n.n(d),h=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"activation",value:function(e){this.props.markers.forEach((function(t){t.title===e?window.google.maps.event.trigger(t,"click"):window.google.maps.event.trigger(t,"")}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.query,a=t.searched,i=t.filteredPlaces;return o.a.createElement("div",{className:"sidemenu","aria-label":"sidemenu",role:"menu"},o.a.createElement("div",{className:"search","aria-label":"searchbox",tabIndex:"0"},o.a.createElement("input",{type:"text",placeholder:"Looking for cafes",value:n,onChange:function(e){return a(e.target.value)}})),o.a.createElement("div",{className:"ListView","aria-label":"list of all cafes"},o.a.createElement("ul",null,i.map((function(t,n){return o.a.createElement("li",{key:n},o.a.createElement("button",{onClick:function(){return e.activation(t.name)},"aria-label":"cafe buttons"},t.name))})))))}}]),t}(a.Component),g=n(16),p=n.n(g);var v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",markers:[],filteredPlaces:[],locations:[{name:"Naguib Mahfouz Cafe",location:{lat:30.047963,lng:31.261567},latlong:"30.047963,31.261567"},{name:"Room Art Space & Cafe",location:{lat:30.03543629889637,lng:31.231414418746162},latlong:"30.03543629889637,31.231414418746162"},{name:"Bubblicious",location:{lat:30.065155534332987,lng:31.217278507457564},latlong:"30.065155534332987,31.217278507457564"},{name:"Bab El Nil",location:{lat:30.07221713024017,lng:31.227788629626797},latlong:"30.07221713024017,31.227788629626797"},{name:"La Madeleine at Sofitel Cairo El Gezirah",location:{lat:30.038783186860627,lng:31.22447222471237},latlong:"30.038783186860627,31.22447222471237"},{name:"El Fishawi",location:{lat:30.0474,lng:31.2623},latlong:"30.0474,31.2623"},{name:"Beanos",location:{lat:30.0485,lng:31.2025},latlong:"30.0485,31.2025"},{name:"Grand Cafe",location:{lat:30.0428,lng:31.1984},latlong:"30.0428,31.1984"},{name:"Pottery Cafe",location:{lat:30.0646,lng:31.2157},latlong:"30.0646,31.2157"}]},n.initMap=function(){var e=n.state,t=e.locations,a=e.markers;n.setState({filteredPlaces:t});var o=new window.google.maps.Map(document.getElementById("map"),{center:{lat:30.0444,lng:31.2357},zoom:14}),i=new window.google.maps.InfoWindow;n.state.locations.forEach((function(e,t){var r=new window.google.maps.Marker({position:n.state.locations[t].location,map:o,title:n.state.locations[t].name}),c=n.state.locations[t].latlong;p.a.get("https://api.foursquare.com/v2/venues/search?ll=".concat(c,"&limit=1&client_id=YKMMQBCQEIR5PSIEIADJMQY4PWZVJAA035MMNN0KQINCS13P&client_secret=2E5JADXJRUMOEQK2XBBCAZ3LYZSBJ2KFC1MW234KUJODTNU2&v=20180827")).then((function(e){var t='<div class="info-window"><h3 class="info-window-heading">'.concat(e.data.response.venues[0].name,'<div class="info-window-content"></h3><p>').concat(e.data.response.venues[0].name,"</p><p>").concat(e.data.response.venues[0].location.formattedAddress,'</p><p class="foursquare-attribution">Fetched from Foursquare</p></div></div>');a.push(r),r.addListener("click",(function(){i.setContent(t),i.open(o,r)}))})).catch((function(e){alert("Foursquare is failed to load!")}))}))},n.filterLocations=function(e){var t=n.state,a=t.locations,o=t.markers;if(n.setState({query:e}),e){o.forEach((function(e){e.setVisible(!1)}));var i=new RegExp(m()(e),"i");n.setState({filteredPlaces:a.filter((function(e){return i.test(e.name)})),searchedMarkers:o.filter((function(e){return i.test(e.title)})).forEach((function(e){return e.setVisible(!0)}))})}else o&&o.forEach((function(e){e.setVisible(!0)})),n.setState({filteredPlaces:a})},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){!function(e){var t=window.document.getElementsByTagName("script")[0],n=window.document.createElement("script");n.src=e,n.async=!0,n.defer=!0,t.parentNode.insertBefore(n,t)}("https://maps.googleapis.com/maps/api/js?key=AIzaSyB2Uc0ijnu0YBte1XEnPcChy6CRn84VTNE&callback=initMap"),window.initMap=this.initMap,window.gm_authFailure=function(){alert("Google maps failed to load!")}}},{key:"render",value:function(){return o.a.createElement("div",{className:"map"},o.a.createElement(h,{query:this.state.query,searchedMarkers:this.state.searchedMarkers,filteredPlaces:this.state.filteredPlaces,markers:this.state.markers,location:this.state.locations,searched:this.filterLocations.bind(this)}),o.a.createElement("div",{id:"map","aria-label":"map",tabIndex:"0"}))}}]),t}(a.Component),w=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("main",null,o.a.createElement(v,null))}}]),t}(a.Component),b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(o.a.createElement(w,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/neighborhood-map",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/neighborhood-map","/service-worker.js");b?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):E(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):E(e)}))}}()}},[[17,1,2]]]);
//# sourceMappingURL=main.9ef7c290.chunk.js.map